<!DOCTYPE html>

<html>

<head></head>

<body>
    <h1>Login</h1>
    <form method="post" id="login-form" name="login-form">
        <input type="text" placeholder="username" name="username">
        <input type="password" placeholder="password" name="password">
        <input type="submit">
    </form>

    <script src="scripts/utils.js"></script>
    <script src="scripts/api.js"></script>
    <script>
        const form = document.getElementById("login-form");

        form.addEventListener("submit", async function (event) {
            event.preventDefault();
            const form_data = new FormData(form);

            const response = await api_request("login", "POST", form_data);

            if(response.success == true) {
                sessionStorage.setItem("isLogged", true);
                
                console.log("redirecting...");
                window.location.replace("index.html");
            } else {
                console.log("token not saved");
            }
        });

    </script>
</body>


</html>


